# Generated by go2rpm 1.3
%bcond_without check

# https://github.com/twitchtv/twirp
%global goipath         github.com/twitchtv/twirp
Version:                8.0.0

%gometa

%global common_description %{expand:
A simple RPC framework with protobuf service definitions.}

%global golicenses      LICENSE NOTICE license_test.go\\\
                        LICENSE-_tools-src-github.com-kisielk-errcheck\\\
                        LICENSE-_tools-src-github.com-kisielk-gotool\\\
                        LICENSE-_tools-src-github.com-twitchtv-retool
%global godocs          docs example CONTRIBUTING.md PROTOCOL.md\\\
                        requirements.txt README.md\\\
                        README-_tools-src-github.com-kisielk-errcheck.md\\\
                        README-_tools-src-github.com-kisielk-gotool.md\\\
                        README-_tools-src-github.com-twitchtv-retool.md\\\
                        README-clientcompat.md

Name:           %{goname}
Release:        1%{?dist}
Summary:        A simple RPC framework with protobuf service definitions

# Upstream license specification: Apache-2.0 and MIT
License:        ASL 2.0 and MIT
URL:            %{gourl}
Source0:        %{gosource}

BuildRequires:  golang(github.com/pkg/errors)
BuildRequires:  golang(google.golang.org/protobuf/encoding/protojson)
BuildRequires:  golang(google.golang.org/protobuf/proto)
BuildRequires:  golang(google.golang.org/protobuf/reflect/protoreflect)
BuildRequires:  golang(google.golang.org/protobuf/runtime/protoimpl)
BuildRequires:  golang(google.golang.org/protobuf/types/descriptorpb)
BuildRequires:  golang(google.golang.org/protobuf/types/known/emptypb)
BuildRequires:  golang(google.golang.org/protobuf/types/known/wrapperspb)
BuildRequires:  golang(google.golang.org/protobuf/types/pluginpb)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/stretchr/testify/assert)
BuildRequires:  golang(github.com/stretchr/testify/require)
%endif

%description
%{common_description}

%gopkg

%prep
%goprep
mv _tools/src/github.com/kisielk/errcheck/LICENSE LICENSE-_tools-src-github.com-kisielk-errcheck
mv _tools/src/github.com/kisielk/gotool/LICENSE LICENSE-_tools-src-github.com-kisielk-gotool
mv _tools/src/github.com/twitchtv/retool/LICENSE LICENSE-_tools-src-github.com-twitchtv-retool
mv _tools/src/github.com/kisielk/errcheck/README.md README-_tools-src-github.com-kisielk-errcheck.md
mv _tools/src/github.com/kisielk/gotool/README.md README-_tools-src-github.com-kisielk-gotool.md
mv _tools/src/github.com/twitchtv/retool/README.md README-_tools-src-github.com-twitchtv-retool.md
mv clientcompat/README.md README-clientcompat.md

%install
%gopkginstall

%if %{with check}
%check
%gocheck
%endif

%files
%license LICENSE NOTICE license_test.go
%license LICENSE-_tools-src-github.com-kisielk-errcheck
%license LICENSE-_tools-src-github.com-kisielk-gotool
%license LICENSE-_tools-src-github.com-twitchtv-retool
%doc docs example CONTRIBUTING.md PROTOCOL.md requirements.txt README.md
%doc README-_tools-src-github.com-kisielk-errcheck.md
%doc README-_tools-src-github.com-kisielk-gotool.md
%doc README-_tools-src-github.com-twitchtv-retool.md README-clientcompat.md

%gopkgfiles

%changelog

