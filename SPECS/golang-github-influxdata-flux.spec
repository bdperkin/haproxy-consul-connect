# Generated by go2rpm 1.3
%bcond_without check

# https://github.com/influxdata/flux
%global goipath         github.com/influxdata/flux
Version:                0.117.1

%gometa

%global common_description %{expand:
# FIXME}

%global golicenses      LICENSE
%global godocs          docs examples TODO.txt CONTRIBUTING.md README.md\\\
                        benchmarks/flux/README.md benchmarks/flux/curl-\\\
                        format.txt colm/README.txt\\\
                        colm/tableflux/expected/query01-expected.txt\\\
                        colm/tableflux/expected/query02-expected.txt\\\
                        colm/tableflux/expected/query03-expected.txt\\\
                        colm/tableflux/expected/query04-expected.txt\\\
                        colm/tableflux/expected/query05-expected.txt\\\
                        colm/tableflux/expected/query06-expected.txt\\\
                        colm/tableflux/expected/query07-expected.txt\\\
                        colm/tableflux/expected/query08-expected.txt\\\
                        colm/tableflux/expected/query09-expected.txt\\\
                        colm/tableflux/expected/query10-expected.txt\\\
                        colm/tableflux/expected/query11-expected.txt\\\
                        colm/tableflux/expected/query12-expected.txt\\\
                        colm/tableflux/expected/query13-expected.txt\\\
                        colm/tableflux/expected/query14-expected.txt\\\
                        colm/tableflux/expected/query15-expected.txt\\\
                        colm/tableflux/expected/query16-expected.txt\\\
                        colm/tableflux/expected/query17-expected.txt\\\
                        colm/tableflux/expected/query18-expected.txt\\\
                        colm/tableflux/expected/query19-expected.txt\\\
                        colm/tableflux/expected/query20-expected.txt\\\
                        colm/tableflux/expected/query21-expected.txt\\\
                        colm/tableflux/expected/query22-expected.txt\\\
                        colm/tableflux/expected/query23-expected.txt\\\
                        colm/tableflux/expected/query24-expected.txt\\\
                        colm/tableflux/expected/query25-expected.txt\\\
                        colm/tableflux/expected/query26-expected.txt\\\
                        libflux/README.md parser/grammar.md\\\
                        querytest/README.md stdlib/README.md\\\
                        stdlib/contrib/README.md stdlib/contrib/RohanSreerama\\\
                        5/naiveBayesClassifier/README.md\\\
                        stdlib/contrib/chobbs/discord/README.md\\\
                        stdlib/contrib/sranka/opsgenie/README.md\\\
                        stdlib/contrib/sranka/sensu/README.md\\\
                        stdlib/contrib/sranka/teams/README.md\\\
                        stdlib/contrib/sranka/telegram/README.md\\\
                        stdlib/contrib/tomhollingworth/events/README.md\\\
                        stdlib/contrib/bonitoo-io/tickscript/README.md\\\
                        stdlib/contrib/bonitoo-io/victorops/README.md\\\
                        stdlib/contrib/bonitoo-io/zenoss/README.md\\\
                        stdlib/contrib/rhajek/bigpanda/README.md\\\
                        stdlib/experimental/geo/README.md

Name:           %{goname}
Release:        1%{?dist}
Summary:        None

License:        MIT
URL:            %{gourl}
Source0:        %{gosource}

BuildRequires:  golang(cloud.google.com/go/bigtable)
BuildRequires:  golang(cloud.google.com/go/civil)
BuildRequires:  golang(github.com/andreyvit/diff)
BuildRequires:  golang(github.com/apache/arrow/go/arrow)
BuildRequires:  golang(github.com/apache/arrow/go/arrow/array)
BuildRequires:  golang(github.com/apache/arrow/go/arrow/bitutil)
BuildRequires:  golang(github.com/apache/arrow/go/arrow/math)
BuildRequires:  golang(github.com/apache/arrow/go/arrow/memory)
BuildRequires:  golang(github.com/Azure/go-autorest/autorest/adal)
BuildRequires:  golang(github.com/Azure/go-autorest/autorest/azure)
BuildRequires:  golang(github.com/Azure/go-autorest/autorest/azure/auth)
BuildRequires:  golang(github.com/benbjohnson/immutable)
BuildRequires:  golang(github.com/benbjohnson/tmpl)
BuildRequires:  golang(github.com/bonitoo-io/go-sql-bigquery)
BuildRequires:  golang(github.com/c-bata/go-prompt)
BuildRequires:  golang(github.com/cespare/xxhash/v2)
BuildRequires:  golang(github.com/dave/jennifer/jen)
BuildRequires:  golang(github.com/denisenkom/go-mssqldb)
BuildRequires:  golang(github.com/eclipse/paho.mqtt.golang)
BuildRequires:  golang(github.com/go-sql-driver/mysql)
BuildRequires:  golang(github.com/gofrs/uuid)
BuildRequires:  golang(github.com/golang/geo/r1)
BuildRequires:  golang(github.com/golang/geo/s1)
BuildRequires:  golang(github.com/golang/geo/s2)
BuildRequires:  golang(github.com/google/flatbuffers/go)
BuildRequires:  golang(github.com/google/go-cmp/cmp)
BuildRequires:  golang(github.com/google/go-cmp/cmp/cmpopts)
BuildRequires:  golang(github.com/goreleaser/goreleaser)
BuildRequires:  golang(github.com/influxdata/changelog)
BuildRequires:  golang(github.com/influxdata/influxdb-client-go/v2/api)
BuildRequires:  golang(github.com/influxdata/influxdb-client-go/v2/api/http)
BuildRequires:  golang(github.com/influxdata/influxdb-client-go/v2/api/write)
BuildRequires:  golang(github.com/influxdata/line-protocol)
BuildRequires:  golang(github.com/influxdata/promql/v2)
BuildRequires:  golang(github.com/influxdata/promql/v2/pkg/labels)
BuildRequires:  golang(github.com/influxdata/tdigest)
BuildRequires:  golang(github.com/lib/pq)
BuildRequires:  golang(github.com/mattn/go-sqlite3)
BuildRequires:  golang(github.com/matttproud/golang_protobuf_extensions/pbutil)
BuildRequires:  golang(github.com/opentracing/opentracing-go)
BuildRequires:  golang(github.com/opentracing/opentracing-go/log)
BuildRequires:  golang(github.com/pkg/errors)
BuildRequires:  golang(github.com/prometheus/client_model/go)
BuildRequires:  golang(github.com/prometheus/common/expfmt)
BuildRequires:  golang(github.com/prometheus/common/model)
BuildRequires:  golang(github.com/SAP/go-hdb/driver)
BuildRequires:  golang(github.com/segmentio/kafka-go)
BuildRequires:  golang(github.com/snowflakedb/gosnowflake)
BuildRequires:  golang(github.com/spf13/cobra)
BuildRequires:  golang(github.com/uber/athenadriver/go)
BuildRequires:  golang(github.com/uber/jaeger-client-go)
BuildRequires:  golang(go.uber.org/zap)
BuildRequires:  golang(go.uber.org/zap/zapcore)
BuildRequires:  golang(go.uber.org/zap/zaptest)
BuildRequires:  golang(golang.org/x/net/context)
BuildRequires:  golang(golang.org/x/tools/go/callgraph)
BuildRequires:  golang(golang.org/x/tools/go/callgraph/rta)
BuildRequires:  golang(golang.org/x/tools/go/packages)
BuildRequires:  golang(golang.org/x/tools/go/ssa)
BuildRequires:  golang(golang.org/x/tools/go/ssa/ssautil)
BuildRequires:  golang(gonum.org/v1/gonum/floats/scalar)
BuildRequires:  golang(google.golang.org/api/option)
BuildRequires:  golang(honnef.co/go/tools/cmd/staticcheck)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/DATA-DOG/go-sqlmock)
BuildRequires:  golang(github.com/foxcpp/go-mockdns)
BuildRequires:  golang(github.com/opentracing/opentracing-go/mocktracer)
%endif

%description
%{common_description}

%gopkg

%prep
%goprep

%build
for cmd in cmd/* ; do
  %gobuild -o %{gobuilddir}/bin/$(basename $cmd) %{goipath}/$cmd
done
for cmd in libflux/go/libflux; do
  %gobuild -o %{gobuilddir}/bin/$(basename $cmd) %{goipath}/$cmd
done

%install
%gopkginstall
install -m 0755 -vd                     %{buildroot}%{_bindir}
install -m 0755 -vp %{gobuilddir}/bin/* %{buildroot}%{_bindir}/

%if %{with check}
%check
%gocheck
%endif

%files
%license LICENSE
%doc docs examples TODO.txt CONTRIBUTING.md README.md benchmarks/flux/README.md
%doc benchmarks/flux/curl-format.txt colm/README.txt
%doc colm/tableflux/expected/query01-expected.txt
%doc colm/tableflux/expected/query02-expected.txt
%doc colm/tableflux/expected/query03-expected.txt
%doc colm/tableflux/expected/query04-expected.txt
%doc colm/tableflux/expected/query05-expected.txt
%doc colm/tableflux/expected/query06-expected.txt
%doc colm/tableflux/expected/query07-expected.txt
%doc colm/tableflux/expected/query08-expected.txt
%doc colm/tableflux/expected/query09-expected.txt
%doc colm/tableflux/expected/query10-expected.txt
%doc colm/tableflux/expected/query11-expected.txt
%doc colm/tableflux/expected/query12-expected.txt
%doc colm/tableflux/expected/query13-expected.txt
%doc colm/tableflux/expected/query14-expected.txt
%doc colm/tableflux/expected/query15-expected.txt
%doc colm/tableflux/expected/query16-expected.txt
%doc colm/tableflux/expected/query17-expected.txt
%doc colm/tableflux/expected/query18-expected.txt
%doc colm/tableflux/expected/query19-expected.txt
%doc colm/tableflux/expected/query20-expected.txt
%doc colm/tableflux/expected/query21-expected.txt
%doc colm/tableflux/expected/query22-expected.txt
%doc colm/tableflux/expected/query23-expected.txt
%doc colm/tableflux/expected/query24-expected.txt
%doc colm/tableflux/expected/query25-expected.txt
%doc colm/tableflux/expected/query26-expected.txt libflux/README.md
%doc parser/grammar.md querytest/README.md stdlib/README.md
%doc stdlib/contrib/README.md
%doc stdlib/contrib/RohanSreerama5/naiveBayesClassifier/README.md
%doc stdlib/contrib/chobbs/discord/README.md
%doc stdlib/contrib/sranka/opsgenie/README.md
%doc stdlib/contrib/sranka/sensu/README.md stdlib/contrib/sranka/teams/README.md
%doc stdlib/contrib/sranka/telegram/README.md
%doc stdlib/contrib/tomhollingworth/events/README.md
%doc stdlib/contrib/bonitoo-io/tickscript/README.md
%doc stdlib/contrib/bonitoo-io/victorops/README.md
%doc stdlib/contrib/bonitoo-io/zenoss/README.md
%doc stdlib/contrib/rhajek/bigpanda/README.md stdlib/experimental/geo/README.md
%{_bindir}/*

%gopkgfiles

%changelog

