# Generated by go2rpm 1.3
%bcond_without check

# https://github.com/hashicorp/nomad
%global goipath         github.com/hashicorp/nomad/api
%global forgeurl        https://github.com/hashicorp/nomad
%global commit          5b828b9e4442684e378ef55850d85613c7f0d141

%gometa

%global common_description %{expand:
# FIXME}

%global golicenses      LICENSE command/license.go command/license_get.go\\\
                        command/license_get_test.go helper/exptime/LICENSE.md\\\
                        website/LICENSE.md website/content/api-\\\
                        docs/operator/license.mdx
%global godocs          CHANGELOG.md README.md client/allocdir/input/test.txt\\\
                        contributing/README.md contributing/checklist-\\\
                        command.md contributing/checklist-jobspec.md\\\
                        contributing/checklist-rpc-endpoint.md\\\
                        contributing/golang.md contributing/issue-labels.md\\\
                        demo/csi/README.md demo/csi/ceph-csi-plugin/README.md\\\
                        demo/csi/cinder-csi-plugin/README.md\\\
                        demo/csi/digitalocean/README.md\\\
                        demo/csi/hostpath/README.md demo/tls/README.md\\\
                        demo/vagrant/README.md dev/README.md dev/docker-\\\
                        clients/README.md dev/tls_cluster/README.md\\\
                        dev/vault/README.md devices/gpu/nvidia/README.md\\\
                        drivers/shared/executor/test-resources/busybox/README\\\
                        example e2e/README.md e2e/consulacls/README.md\\\
                        e2e/terraform/README.md\\\
                        e2e/terraform/config/shared/README.md\\\
                        e2e/terraform/packer/README.md\\\
                        e2e/terraform/packer/windows-2016-amd64/README.md\\\
                        e2e/terraform/userdata/README.md\\\
                        e2e/upgrades/README.md e2e/vaultcompat/README.md\\\
                        integrations/grafana_dashboards/README.md\\\
                        integrations/prometheus/README.md\\\
                        jobspec2/addrs/README.md\\\
                        nomad/structs/config/README.md example\\\
                        plugins/shared/cmd/launcher/README.md examples\\\
                        terraform/README.md terraform/aws/README.md\\\
                        terraform/azure/README.md terraform/gcp/README.md\\\
                        tools/buf/README.md ui/DEVELOPMENT_MODE.md\\\
                        ui/README.md ui/public/robots.txt\\\
                        website/.markdownlintrc website/README.md docs\\\
                        website/content/api-docs/acl-policies.mdx\\\
                        website/content/api-docs/acl-tokens.mdx\\\
                        website/content/api-docs/agent.mdx\\\
                        website/content/api-docs/allocations.mdx\\\
                        website/content/api-docs/client.mdx\\\
                        website/content/api-docs/deployments.mdx\\\
                        website/content/api-docs/evaluations.mdx\\\
                        website/content/api-docs/events.mdx\\\
                        website/content/api-docs/index.mdx\\\
                        website/content/api-docs/jobs.mdx\\\
                        website/content/api-docs/json-jobs.mdx\\\
                        website/content/api-docs/libraries-and-sdks.mdx\\\
                        website/content/api-docs/metrics.mdx\\\
                        website/content/api-docs/namespaces.mdx\\\
                        website/content/api-docs/nodes.mdx\\\
                        website/content/api-docs/plugins.mdx\\\
                        website/content/api-docs/quotas.mdx\\\
                        website/content/api-docs/recommendations.mdx\\\
                        website/content/api-docs/regions.mdx\\\
                        website/content/api-docs/scaling-policies.mdx\\\
                        website/content/api-docs/search.mdx\\\
                        website/content/api-docs/sentinel-policies.mdx\\\
                        website/content/api-docs/status.mdx\\\
                        website/content/api-docs/system.mdx\\\
                        website/content/api-docs/ui.mdx website/content/api-\\\
                        docs/validate.mdx website/content/api-\\\
                        docs/volumes.mdx website/content/api-\\\
                        docs/operator/autopilot.mdx website/content/api-\\\
                        docs/operator/index.mdx website/content/api-\\\
                        docs/operator/raft.mdx website/content/api-\\\
                        docs/operator/scheduler.mdx website/content/api-\\\
                        docs/operator/snapshot.mdx\\\
                        website/content/intro/index.mdx\\\
                        website/content/intro/use-cases.mdx\\\
                        website/content/intro/vs/ecs.mdx\\\
                        website/content/intro/vs/index.mdx\\\
                        website/content/intro/vs/mesos.mdx\\\
                        website/content/intro/vs/terraform.mdx\\\
                        website/content/partials/envvars.mdx\\\
                        website/content/partials/general_options.mdx website/\\\
                        content/partials/general_options_no_namespace.mdx\\\
                        docs website/public/robots.txt

Name:           %{goname}
Version:        0
Release:        0.1%{?dist}
Summary:        None

# Upstream license specification: BSD-3-Clause and MPL-2.0
License:        BSD and MPLv2.0
URL:            %{gourl}
Source0:        %{gosource}

BuildRequires:  golang(github.com/armon/circbuf)
BuildRequires:  golang(github.com/armon/go-metrics)
BuildRequires:  golang(github.com/armon/go-metrics/circonus)
BuildRequires:  golang(github.com/armon/go-metrics/datadog)
BuildRequires:  golang(github.com/armon/go-metrics/prometheus)
BuildRequires:  golang(github.com/aws/aws-sdk-go/aws)
BuildRequires:  golang(github.com/aws/aws-sdk-go/aws/awserr)
BuildRequires:  golang(github.com/aws/aws-sdk-go/aws/ec2metadata)
BuildRequires:  golang(github.com/aws/aws-sdk-go/aws/session)
BuildRequires:  golang(github.com/aws/aws-sdk-go/service/ec2)
BuildRequires:  golang(github.com/aws/aws-sdk-go/service/ecs)
BuildRequires:  golang(github.com/boltdb/bolt)
BuildRequires:  golang(github.com/container-storage-interface/spec/lib/go/csi)
BuildRequires:  golang(github.com/containerd/go-cni)
BuildRequires:  golang(github.com/containernetworking/cni/libcni)
BuildRequires:  golang(github.com/containernetworking/plugins/pkg/ns)
BuildRequires:  golang(github.com/coreos/go-iptables/iptables)
BuildRequires:  golang(github.com/coreos/go-semver/semver)
BuildRequires:  golang(github.com/docker/cli/cli/config/configfile)
BuildRequires:  golang(github.com/docker/cli/cli/config/types)
BuildRequires:  golang(github.com/docker/distribution/reference)
BuildRequires:  golang(github.com/docker/docker/api/types/registry)
BuildRequires:  golang(github.com/docker/docker/pkg/ioutils)
BuildRequires:  golang(github.com/docker/docker/pkg/jsonmessage)
BuildRequires:  golang(github.com/docker/docker/pkg/mount)
BuildRequires:  golang(github.com/docker/docker/pkg/term)
BuildRequires:  golang(github.com/docker/docker/registry)
BuildRequires:  golang(github.com/docker/go-units)
BuildRequires:  golang(github.com/docker/libnetwork/resolvconf)
BuildRequires:  golang(github.com/docker/libnetwork/types)
BuildRequires:  golang(github.com/dustin/go-humanize)
BuildRequires:  golang(github.com/elazarl/go-bindata-assetfs)
BuildRequires:  golang(github.com/fatih/color)
BuildRequires:  golang(github.com/fsouza/go-dockerclient)
BuildRequires:  golang(github.com/golang/protobuf/proto)
BuildRequires:  golang(github.com/golang/protobuf/ptypes)
BuildRequires:  golang(github.com/golang/protobuf/ptypes/duration)
BuildRequires:  golang(github.com/golang/protobuf/ptypes/timestamp)
BuildRequires:  golang(github.com/golang/protobuf/ptypes/wrappers)
BuildRequires:  golang(github.com/golang/snappy)
BuildRequires:  golang(github.com/gorilla/websocket)
BuildRequires:  golang(github.com/grpc-ecosystem/go-grpc-middleware/retry)
BuildRequires:  golang(github.com/hashicorp/consul-template/config)
BuildRequires:  golang(github.com/hashicorp/consul-template/manager)
BuildRequires:  golang(github.com/hashicorp/consul-template/signals)
BuildRequires:  golang(github.com/hashicorp/consul/agent/consul/autopilot)
BuildRequires:  golang(github.com/hashicorp/consul/api)
BuildRequires:  golang(github.com/hashicorp/consul/lib)
BuildRequires:  golang(github.com/hashicorp/cronexpr)
BuildRequires:  golang(github.com/hashicorp/go-checkpoint)
BuildRequires:  golang(github.com/hashicorp/go-cleanhttp)
BuildRequires:  golang(github.com/hashicorp/go-connlimit)
BuildRequires:  golang(github.com/hashicorp/go-cty-funcs/cidr)
BuildRequires:  golang(github.com/hashicorp/go-cty-funcs/crypto)
BuildRequires:  golang(github.com/hashicorp/go-cty-funcs/encoding)
BuildRequires:  golang(github.com/hashicorp/go-cty-funcs/filesystem)
BuildRequires:  golang(github.com/hashicorp/go-cty-funcs/uuid)
BuildRequires:  golang(github.com/hashicorp/go-discover)
BuildRequires:  golang(github.com/hashicorp/go-envparse)
BuildRequires:  golang(github.com/hashicorp/go-getter)
BuildRequires:  golang(github.com/hashicorp/go-hclog)
BuildRequires:  golang(github.com/hashicorp/go-immutable-radix)
BuildRequires:  golang(github.com/hashicorp/go-memdb)
BuildRequires:  golang(github.com/hashicorp/go-msgpack/codec)
BuildRequires:  golang(github.com/hashicorp/go-multierror)
BuildRequires:  golang(github.com/hashicorp/go-plugin)
BuildRequires:  golang(github.com/hashicorp/go-rootcerts)
BuildRequires:  golang(github.com/hashicorp/go-sockaddr)
BuildRequires:  golang(github.com/hashicorp/go-sockaddr/template)
BuildRequires:  golang(github.com/hashicorp/go-syslog)
BuildRequires:  golang(github.com/hashicorp/go-uuid)
BuildRequires:  golang(github.com/hashicorp/go-version)
BuildRequires:  golang(github.com/hashicorp/golang-lru)
BuildRequires:  golang(github.com/hashicorp/hcl)
BuildRequires:  golang(github.com/hashicorp/hcl/hcl/ast)
BuildRequires:  golang(github.com/hashicorp/hcl/v2)
BuildRequires:  golang(github.com/hashicorp/hcl/v2/ext/dynblock)
BuildRequires:  golang(github.com/hashicorp/hcl/v2/ext/tryfunc)
BuildRequires:  golang(github.com/hashicorp/hcl/v2/ext/typeexpr)
BuildRequires:  golang(github.com/hashicorp/hcl/v2/gohcl)
BuildRequires:  golang(github.com/hashicorp/hcl/v2/hcldec)
BuildRequires:  golang(github.com/hashicorp/hcl/v2/hclsyntax)
BuildRequires:  golang(github.com/hashicorp/hcl/v2/json)
BuildRequires:  golang(github.com/hashicorp/logutils)
BuildRequires:  golang(github.com/hashicorp/memberlist)
BuildRequires:  golang(github.com/hashicorp/net-rpc-msgpackrpc)
BuildRequires:  golang(github.com/hashicorp/raft)
BuildRequires:  golang(github.com/hashicorp/raft-boltdb)
BuildRequires:  golang(github.com/hashicorp/serf/serf)
BuildRequires:  golang(github.com/hashicorp/vault/api)
BuildRequires:  golang(github.com/hashicorp/yamux)
BuildRequires:  golang(github.com/hpcloud/tail/watch)
BuildRequires:  golang(github.com/kr/pretty)
BuildRequires:  golang(github.com/kr/pty)
BuildRequires:  golang(github.com/kr/text)
BuildRequires:  golang(github.com/LK4D4/joincontext)
BuildRequires:  golang(github.com/mattn/go-colorable)
BuildRequires:  golang(github.com/mitchellh/cli)
BuildRequires:  golang(github.com/mitchellh/colorstring)
BuildRequires:  golang(github.com/mitchellh/copystructure)
BuildRequires:  golang(github.com/mitchellh/go-ps)
BuildRequires:  golang(github.com/mitchellh/go-testing-interface)
BuildRequires:  golang(github.com/mitchellh/hashstructure)
BuildRequires:  golang(github.com/mitchellh/mapstructure)
BuildRequires:  golang(github.com/mitchellh/reflectwalk)
BuildRequires:  golang(github.com/NVIDIA/gpu-monitoring-tools/bindings/go/nvml)
BuildRequires:  golang(github.com/NYTimes/gziphandler)
BuildRequires:  golang(github.com/opencontainers/runc/libcontainer)
BuildRequires:  golang(github.com/opencontainers/runc/libcontainer/cgroups)
BuildRequires:  golang(github.com/opencontainers/runc/libcontainer/cgroups/fs)
BuildRequires:  golang(github.com/opencontainers/runc/libcontainer/cgroups/fscommon)
BuildRequires:  golang(github.com/opencontainers/runc/libcontainer/configs)
BuildRequires:  golang(github.com/opencontainers/runc/libcontainer/devices)
BuildRequires:  golang(github.com/opencontainers/runc/libcontainer/nsenter)
BuildRequires:  golang(github.com/opencontainers/runc/libcontainer/specconv)
BuildRequires:  golang(github.com/opencontainers/runc/libcontainer/utils)
BuildRequires:  golang(github.com/opencontainers/runtime-spec/specs-go)
BuildRequires:  golang(github.com/pkg/errors)
BuildRequires:  golang(github.com/posener/complete)
BuildRequires:  golang(github.com/prometheus/client_golang/prometheus)
BuildRequires:  golang(github.com/prometheus/client_golang/prometheus/promhttp)
BuildRequires:  golang(github.com/prometheus/common/model)
BuildRequires:  golang(github.com/rs/cors)
BuildRequires:  golang(github.com/ryanuber/columnize)
BuildRequires:  golang(github.com/ryanuber/go-glob)
BuildRequires:  golang(github.com/sean-/seed)
BuildRequires:  golang(github.com/shirou/gopsutil/v3/cpu)
BuildRequires:  golang(github.com/shirou/gopsutil/v3/disk)
BuildRequires:  golang(github.com/shirou/gopsutil/v3/host)
BuildRequires:  golang(github.com/shirou/gopsutil/v3/mem)
BuildRequires:  golang(github.com/shirou/gopsutil/v3/process)
BuildRequires:  golang(github.com/skratchdot/open-golang/open)
BuildRequires:  golang(github.com/stretchr/testify/assert)
BuildRequires:  golang(github.com/stretchr/testify/require)
BuildRequires:  golang(github.com/syndtr/gocapability/capability)
BuildRequires:  golang(github.com/zclconf/go-cty-yaml)
BuildRequires:  golang(github.com/zclconf/go-cty/cty)
BuildRequires:  golang(github.com/zclconf/go-cty/cty/convert)
BuildRequires:  golang(github.com/zclconf/go-cty/cty/function)
BuildRequires:  golang(github.com/zclconf/go-cty/cty/function/stdlib)
BuildRequires:  golang(github.com/zclconf/go-cty/cty/gocty)
BuildRequires:  golang(github.com/zclconf/go-cty/cty/msgpack)
BuildRequires:  golang(golang.org/x/crypto/blake2b)
BuildRequires:  golang(golang.org/x/crypto/ssh/terminal)
BuildRequires:  golang(golang.org/x/net/context)
BuildRequires:  golang(golang.org/x/sync/errgroup)
BuildRequires:  golang(golang.org/x/sys/unix)
BuildRequires:  golang(golang.org/x/time/rate)
BuildRequires:  golang(google.golang.org/grpc)
BuildRequires:  golang(google.golang.org/grpc/codes)
BuildRequires:  golang(google.golang.org/grpc/status)
BuildRequires:  golang(gopkg.in/tomb.v1)
BuildRequires:  golang(gopkg.in/tomb.v2)

%if %{with check}
# Tests
BuildRequires:  golang(github.com/google/go-cmp/cmp)
BuildRequires:  golang(github.com/google/go-cmp/cmp/cmpopts)
BuildRequires:  golang(github.com/hashicorp/consul/sdk/testutil)
BuildRequires:  golang(github.com/hashicorp/consul/sdk/testutil/retry)
BuildRequires:  golang(github.com/hashicorp/vault/sdk/helper/consts)
BuildRequires:  golang(github.com/stretchr/testify/mock)
%endif

%description
%{common_description}

%gopkg

%prep
%goprep

%build
%gobuild -o %{gobuilddir}/bin/api %{goipath}
for cmd in demo/digitalocean/app e2e/cli tools/ec2info; do
  %gobuild -o %{gobuilddir}/bin/$(basename $cmd) %{goipath}/$cmd
done

%install
%gopkginstall
install -m 0755 -vd                     %{buildroot}%{_bindir}
install -m 0755 -vp %{gobuilddir}/bin/* %{buildroot}%{_bindir}/

%if %{with check}
%check
%gocheck
%endif

%files
%license LICENSE command/license.go command/license_get.go
%license command/license_get_test.go helper/exptime/LICENSE.md
%license website/LICENSE.md website/content/api-docs/operator/license.mdx
%doc CHANGELOG.md README.md client/allocdir/input/test.txt
%doc contributing/README.md contributing/checklist-command.md
%doc contributing/checklist-jobspec.md contributing/checklist-rpc-endpoint.md
%doc contributing/golang.md contributing/issue-labels.md demo/csi/README.md
%doc demo/csi/ceph-csi-plugin/README.md demo/csi/cinder-csi-plugin/README.md
%doc demo/csi/digitalocean/README.md demo/csi/hostpath/README.md
%doc demo/tls/README.md demo/vagrant/README.md dev/README.md
%doc dev/docker-clients/README.md dev/tls_cluster/README.md dev/vault/README.md
%doc devices/gpu/nvidia/README.md
%doc drivers/shared/executor/test-resources/busybox/README example e2e/README.md
%doc e2e/consulacls/README.md e2e/terraform/README.md
%doc e2e/terraform/config/shared/README.md e2e/terraform/packer/README.md
%doc e2e/terraform/packer/windows-2016-amd64/README.md
%doc e2e/terraform/userdata/README.md e2e/upgrades/README.md
%doc e2e/vaultcompat/README.md integrations/grafana_dashboards/README.md
%doc integrations/prometheus/README.md jobspec2/addrs/README.md
%doc nomad/structs/config/README.md example
%doc plugins/shared/cmd/launcher/README.md examples terraform/README.md
%doc terraform/aws/README.md terraform/azure/README.md terraform/gcp/README.md
%doc tools/buf/README.md ui/DEVELOPMENT_MODE.md ui/README.md
%doc ui/public/robots.txt website/.markdownlintrc website/README.md docs
%doc website/content/api-docs/acl-policies.mdx
%doc website/content/api-docs/acl-tokens.mdx website/content/api-docs/agent.mdx
%doc website/content/api-docs/allocations.mdx
%doc website/content/api-docs/client.mdx
%doc website/content/api-docs/deployments.mdx
%doc website/content/api-docs/evaluations.mdx
%doc website/content/api-docs/events.mdx website/content/api-docs/index.mdx
%doc website/content/api-docs/jobs.mdx website/content/api-docs/json-jobs.mdx
%doc website/content/api-docs/libraries-and-sdks.mdx
%doc website/content/api-docs/metrics.mdx
%doc website/content/api-docs/namespaces.mdx website/content/api-docs/nodes.mdx
%doc website/content/api-docs/plugins.mdx website/content/api-docs/quotas.mdx
%doc website/content/api-docs/recommendations.mdx
%doc website/content/api-docs/regions.mdx
%doc website/content/api-docs/scaling-policies.mdx
%doc website/content/api-docs/search.mdx
%doc website/content/api-docs/sentinel-policies.mdx
%doc website/content/api-docs/status.mdx website/content/api-docs/system.mdx
%doc website/content/api-docs/ui.mdx website/content/api-docs/validate.mdx
%doc website/content/api-docs/volumes.mdx
%doc website/content/api-docs/operator/autopilot.mdx
%doc website/content/api-docs/operator/index.mdx
%doc website/content/api-docs/operator/raft.mdx
%doc website/content/api-docs/operator/scheduler.mdx
%doc website/content/api-docs/operator/snapshot.mdx
%doc website/content/intro/index.mdx website/content/intro/use-cases.mdx
%doc website/content/intro/vs/ecs.mdx website/content/intro/vs/index.mdx
%doc website/content/intro/vs/mesos.mdx website/content/intro/vs/terraform.mdx
%doc website/content/partials/envvars.mdx
%doc website/content/partials/general_options.mdx
%doc website/content/partials/general_options_no_namespace.mdx docs
%doc website/public/robots.txt
%{_bindir}/*

%gopkgfiles

%changelog

